(function(){"use strict";var sr=(()=>{var w=self.location.href;return async function(m={}){var b,o=m,S,P,x=new Promise((e,t)=>{S=e,P=t}),A=typeof window=="object",F=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(H){const{createRequire:e}=await Promise.resolve().then(function(){return gr});var I=e(self.location.href)}var W=!1;o.setup=function(){if(W)return;W=!0,o.initTBB();function e(s,a,l=p=>p){if(a)for(let p of a)s.push_back(l(p));return s}function t(s,a=l=>l){const l=[],p=s.size();for(let y=0;y<p;y++)l.push(a(s.get(y)));return l}function r(s,a=l=>l){const l=[],p=s.size();for(let y=0;y<p;y++){const E=s.get(y),j=E.size(),X=[];for(let k=0;k<j;k++)X.push(a(E.get(k)));l.push(X)}return l}function n(s){return s[0].length<3&&(s=[s]),e(new o.Vector2_vec2,s,a=>e(new o.Vector_vec2,a,l=>l instanceof Array?{x:l[0],y:l[1]}:l))}function i(s){for(let a=0;a<s.size();a++)s.get(a).delete();s.delete()}function c(s){return s[0]instanceof Array?{x:s[0][0],y:s[0][1]}:typeof s[0]=="number"?{x:s[0]||0,y:s[1]||0}:s[0]}function f(s){return s[0]instanceof Array?{x:s[0][0],y:s[0][1],z:s[0][2]}:typeof s[0]=="number"?{x:s[0]||0,y:s[1]||0,z:s[2]||0}:s[0]}function u(s){return s=="EvenOdd"?0:s=="NonZero"?1:s=="Negative"?3:2}function d(s){return s=="Round"?1:s=="Miter"?2:0}const v=o.CrossSection;function h(s,a="Positive"){if(s instanceof v)return s;{const l=n(s),p=new v(l,u(a));return i(l),p}}o.CrossSection.prototype.translate=function(...s){return this._Translate(c(s))},o.CrossSection.prototype.scale=function(s){return typeof s=="number"?this._Scale({x:s,y:s}):this._Scale(c([s]))},o.CrossSection.prototype.mirror=function(s){return this._Mirror(c([s]))},o.CrossSection.prototype.warp=function(s){const a=qe(function(p){const y=Y(p,"double"),E=Y(p+8,"double"),j=[y,E];s(j),xe(p,j[0],"double"),xe(p+8,j[1],"double")},"vi"),l=this._Warp(a);return Ge(a),l},o.CrossSection.prototype.decompose=function(){const s=this._Decompose(),a=t(s);return s.delete(),a},o.CrossSection.prototype.bounds=function(){const s=this._Bounds();return{min:["x","y"].map(a=>s.min[a]),max:["x","y"].map(a=>s.max[a])}},o.CrossSection.prototype.offset=function(s,a="Square",l=2,p=0){return this._Offset(s,d(a),l,p)},o.CrossSection.prototype.extrude=function(s,a=0,l=0,p=[1,1],y=!1){p=c([p]);const E=o._Extrude(this._ToPolygons(),s,a,l,p);return y?E.translate([0,0,-s/2]):E},o.CrossSection.prototype.revolve=function(s=0,a=360){return o._Revolve(this._ToPolygons(),s,a)},o.CrossSection.prototype.add=function(s){return this._add(h(s))},o.CrossSection.prototype.subtract=function(s){return this._subtract(h(s))},o.CrossSection.prototype.intersect=function(s){return this._intersect(h(s))},o.CrossSection.prototype.toPolygons=function(){const s=this._ToPolygons(),a=r(s,l=>[l.x,l.y]);return s.delete(),a},o.Manifold.prototype.smoothOut=function(s=60,a=0){return this._SmoothOut(s,a)},o.Manifold.prototype.warp=function(s){const a=qe(function(y){const E=Y(y,"double"),j=Y(y+8,"double"),X=Y(y+16,"double"),k=[E,j,X];s(k),xe(y,k[0],"double"),xe(y+8,k[1],"double"),xe(y+16,k[2],"double")},"vi"),l=this._Warp(a);Ge(a);const p=l.status();if(p.value!==0)throw new o.ManifoldError(p.value);return l},o.Manifold.prototype.calculateNormals=function(s,a=60){return this._CalculateNormals(s,a)},o.Manifold.prototype.setProperties=function(s,a){const l=this.numProp(),p=qe(function(E,j,X){const k=[];for(let V=0;V<s;++V)k[V]=Y(E+8*V,"double");const ke=[];for(let V=0;V<3;++V)ke[V]=Y(j+8*V,"double");const Ve=[];for(let V=0;V<l;++V)Ve[V]=Y(X+8*V,"double");a(k,ke,Ve);for(let V=0;V<s;++V)xe(E+8*V,k[V],"double")},"viii"),y=this._SetProperties(s,p);return Ge(p),y},o.Manifold.prototype.translate=function(...s){return this._Translate(f(s))},o.Manifold.prototype.rotate=function(s,a,l){return Array.isArray(s)?this._Rotate(...s):this._Rotate(s,a||0,l||0)},o.Manifold.prototype.scale=function(s){return typeof s=="number"?this._Scale({x:s,y:s,z:s}):this._Scale(f([s]))},o.Manifold.prototype.mirror=function(s){return this._Mirror(f([s]))},o.Manifold.prototype.trimByPlane=function(s,a=0){return this._TrimByPlane(f([s]),a)},o.Manifold.prototype.slice=function(s=0){const a=this._Slice(s),l=new v(a,u("Positive"));return i(a),l},o.Manifold.prototype.project=function(){const s=this._Project(),a=new v(s,u("Positive"));return i(s),a},o.Manifold.prototype.split=function(s){const a=this._Split(s),l=t(a);return a.delete(),l},o.Manifold.prototype.splitByPlane=function(s,a=0){const l=this._SplitByPlane(f([s]),a),p=t(l);return l.delete(),p},o.Manifold.prototype.decompose=function(){const s=this._Decompose(),a=t(s);return s.delete(),a},o.Manifold.prototype.boundingBox=function(){const s=this._boundingBox();return{min:["x","y","z"].map(a=>s.min[a]),max:["x","y","z"].map(a=>s.max[a])}};class _{constructor({numProp:a=3,triVerts:l=new Uint32Array,vertProperties:p=new Float32Array,mergeFromVert:y,mergeToVert:E,runIndex:j,runOriginalID:X,faceID:k,halfedgeTangent:ke,runTransform:Ve}={}){this.numProp=a,this.triVerts=l,this.vertProperties=p,this.mergeFromVert=y,this.mergeToVert=E,this.runIndex=j,this.runOriginalID=X,this.faceID=k,this.halfedgeTangent=ke,this.runTransform=Ve}get numTri(){return this.triVerts.length/3}get numVert(){return this.vertProperties.length/this.numProp}get numRun(){return this.runOriginalID.length}merge(){const{changed:a,mesh:l}=o._Merge(this);return Object.assign(this,{...l}),a}verts(a){return this.triVerts.subarray(3*a,3*(a+1))}position(a){return this.vertProperties.subarray(this.numProp*a,this.numProp*a+3)}extras(a){return this.vertProperties.subarray(this.numProp*a+3,this.numProp*(a+1))}tangent(a){return this.halfedgeTangent.subarray(4*a,4*(a+1))}transform(a){const l=new Array(16);for(const p of[0,1,2,3])for(const y of[0,1,2])l[4*p+y]=this.runTransform[12*a+3*p+y];return l[15]=1,l}}o.Mesh=_,o.Manifold.prototype.getMesh=function(s=-1){return new _(this._GetMeshJS(s))},o.ManifoldError=function(a,...l){let p="Unknown error";switch(a){case o.status.NonFiniteVertex.value:p="Non-finite vertex";break;case o.status.NotManifold.value:p="Not manifold";break;case o.status.VertexOutOfBounds.value:p="Vertex index out of bounds";break;case o.status.PropertiesWrongLength.value:p="Properties have wrong length";break;case o.status.MissingPositionProperties.value:p="Less than three properties";break;case o.status.MergeVectorsDifferentLengths.value:p="Merge vectors have different lengths";break;case o.status.MergeIndexOutOfBounds.value:p="Merge index out of bounds";break;case o.status.TransformWrongLength.value:p="Transform vector has wrong length";break;case o.status.RunIndexWrongLength.value:p="Run index vector has wrong length";break;case o.status.FaceIDWrongLength.value:p="Face ID vector has wrong length";case o.status.InvalidConstruction.value:p="Manifold constructed with invalid parameters"}const y=Error.apply(this,[p,...l]);y.name=this.name="ManifoldError",this.message=y.message,this.stack=y.stack,this.code=a},o.ManifoldError.prototype=Object.create(Error.prototype,{constructor:{value:o.ManifoldError,writable:!0,configurable:!0}}),o.CrossSection=function(s,a="Positive"){const l=n(s),p=new v(l,u(a));return i(l),p},o.CrossSection.ofPolygons=function(s,a="Positive"){return new o.CrossSection(s,a)},o.CrossSection.square=function(...s){let a;s.length==0?a={x:1,y:1}:typeof s[0]=="number"?a={x:s[0],y:s[0]}:a=c(s);const l=s[1]||!1;return o._Square(a,l)},o.CrossSection.circle=function(s,a=0){return o._Circle(s,a)};function T(s){return function(...a){a.length==1&&(a=a[0]);const l=new o.Vector_crossSection;for(const y of a)l.push_back(h(y));const p=o["_crossSection"+s](l);return l.delete(),p}}o.CrossSection.compose=T("Compose"),o.CrossSection.union=T("UnionN"),o.CrossSection.difference=T("DifferenceN"),o.CrossSection.intersection=T("IntersectionN");function D(s,a){e(s,a,l=>l instanceof Array?{x:l[0],y:l[1]}:l)}o.CrossSection.hull=function(...s){s.length==1&&(s=s[0]);let a=new o.Vector_vec2;for(const p of s)if(p instanceof v)o._crossSectionCollectVertices(a,p);else if(p instanceof Array&&p.length==2&&typeof p[0]=="number")a.push_back({x:p[0],y:p[1]});else if(p.x)a.push_back(p);else{const E=p[0].length==2&&typeof p[0][0]=="number"||p[0].x?[p]:p;for(const j of E)D(a,j)}const l=o._crossSectionHullPoints(a);return a.delete(),l},o.CrossSection.prototype=Object.create(v.prototype),Object.defineProperty(o.CrossSection,Symbol.hasInstance,{get:()=>s=>s instanceof v});const O=o.Manifold;o.Manifold=function(s){const a=new O(s),l=a.status();if(l.value!==0)throw new o.ManifoldError(l.value);return a},o.Manifold.ofMesh=function(s){return new o.Manifold(s)},o.Manifold.tetrahedron=function(){return o._Tetrahedron()},o.Manifold.cube=function(...s){let a;s.length==0?a={x:1,y:1,z:1}:typeof s[0]=="number"?a={x:s[0],y:s[0],z:s[0]}:a=f(s);const l=s[1]||!1;return o._Cube(a,l)},o.Manifold.cylinder=function(s,a,l=-1,p=0,y=!1){return o._Cylinder(s,a,l,p,y)},o.Manifold.sphere=function(s,a=0){return o._Sphere(s,a)},o.Manifold.smooth=function(s,a=[]){const l=new o.Vector_smoothness;e(l,a);const p=o._Smooth(s,l);return l.delete(),p},o.Manifold.extrude=function(s,a,l=0,p=0,y=[1,1],E=!1){return(s instanceof v?s:o.CrossSection(s,"Positive")).extrude(a,l,p,y,E)},o.Manifold.revolve=function(s,a=0,l=360){return(s instanceof v?s:o.CrossSection(s,"Positive")).revolve(a,l)},o.Manifold.reserveIDs=function(s){return o._ReserveIDs(s)},o.Manifold.compose=function(s){const a=new o.Vector_manifold;e(a,s);const l=o._manifoldCompose(a);return a.delete(),l};function Z(s){return function(...a){a.length==1&&(a=a[0]);const l=new o.Vector_manifold;for(const y of a)l.push_back(y);const p=o["_manifold"+s+"N"](l);return l.delete(),p}}o.Manifold.union=Z("Union"),o.Manifold.difference=Z("Difference"),o.Manifold.intersection=Z("Intersection"),o.Manifold.levelSet=function(s,a,l,p=0,y=-1){const E={min:{x:a.min[0],y:a.min[1],z:a.min[2]},max:{x:a.max[0],y:a.max[1],z:a.max[2]}},j=qe(function(k){const ke=Y(k,"double"),Ve=Y(k+8,"double"),V=Y(k+16,"double");return s([ke,Ve,V])},"di"),X=o._LevelSet(j,E,l,p,y);return Ge(j),X};function ee(s,a){e(s,a,l=>l instanceof Array?{x:l[0],y:l[1],z:l[2]}:l)}o.Manifold.hull=function(...s){s.length==1&&(s=s[0]);let a=new o.Vector_vec3;for(const p of s)p instanceof O?o._manifoldCollectVertices(a,p):p instanceof Array&&p.length==3&&typeof p[0]=="number"?a.push_back({x:p[0],y:p[1],z:p[2]}):p.x?a.push_back(p):ee(a,p);const l=o._manifoldHullPoints(a);return a.delete(),l},o.Manifold.prototype=Object.create(O.prototype),Object.defineProperty(o.Manifold,Symbol.hasInstance,{get:()=>s=>s instanceof O}),o.triangulate=function(s,a=-1){const l=n(s),p=t(o._Triangulate(l,a),y=>[y[0],y[1],y[2]]);return i(l),p}};var z=Object.assign({},o),U="";function pe(e){return o.locateFile?o.locateFile(e,U):U+e}var q,G;if(H){var te=I("fs"),he=I("path");U=I("url").fileURLToPath(new URL("/auto-kdk/assets/manifold-BrJGmODQ.js",self.location.href)),G=e=>{e=Ae(e)?new URL(e):he.normalize(e);var t=te.readFileSync(e);return t},q=(e,t=!0)=>(e=Ae(e)?new URL(e):he.normalize(e),new Promise((r,n)=>{te.readFile(e,t?void 0:"utf8",(i,c)=>{i?n(i):r(t?c.buffer:c)})})),!o.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else(A||F)&&(F?U=self.location.href:typeof document<"u"&&document.currentScript&&(U=document.currentScript.src),w&&(U=w),U.startsWith("blob:")?U="":U=U.substr(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1),F&&(G=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),q=e=>Ae(e)?new Promise((t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{(n.status==200||n.status==0&&n.response)&&r(n.response),t(n.status)},n.onerror=t,n.send(null)}):fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));o.print||console.log.bind(console);var J=o.printErr||console.error.bind(console);Object.assign(o,z),z=null,o.arguments&&o.arguments,o.thisProgram&&o.thisProgram,o.quit&&o.quit;var ue;o.wasmBinary&&(ue=o.wasmBinary);var Te,ye=!1,R,B,re,$,ne,M,me,ge;function Ie(){var e=Te.buffer;o.HEAP8=R=new Int8Array(e),o.HEAP16=re=new Int16Array(e),o.HEAPU8=B=new Uint8Array(e),o.HEAPU16=$=new Uint16Array(e),o.HEAP32=ne=new Int32Array(e),o.HEAPU32=M=new Uint32Array(e),o.HEAPF32=me=new Float32Array(e),o.HEAPF64=ge=new Float64Array(e)}var Se=[],De=[],Je=[];function dt(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Ke(o.preRun.shift());mt(Se)}function vt(){mt(De)}function Ye(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)Qe(o.postRun.shift());mt(Je)}function Ke(e){Se.unshift(e)}function pt(e){De.unshift(e)}function Qe(e){Je.unshift(e)}var oe=0,_e=null;function ht(e){var t;oe++,(t=o.monitorRunDependencies)==null||t.call(o,oe)}function je(e){var r;if(oe--,(r=o.monitorRunDependencies)==null||r.call(o,oe),oe==0&&_e){var t=_e;_e=null,t()}}function ve(e){var r;(r=o.onAbort)==null||r.call(o,e),e="Aborted("+e+")",J(e),ye=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw P(t),t}var Ot="data:application/octet-stream;base64,",Ze=e=>e.startsWith(Ot),Ae=e=>e.startsWith("file://");function yt(){if(o.locateFile){var e="manifold.wasm";return Ze(e)?e:pe(e)}return new URL("/auto-kdk/assets/manifold-CUOyaTWM.wasm",self.location.href).href}var Me;function He(e){if(e==Me&&ue)return new Uint8Array(ue);if(G)return G(e);throw"both async and sync fetching of the wasm failed"}function g(e){return ue?Promise.resolve().then(()=>He(e)):q(e).then(t=>new Uint8Array(t),()=>He(e))}function le(e,t,r){return g(e).then(n=>WebAssembly.instantiate(n,t)).then(r,n=>{J(`failed to asynchronously prepare wasm: ${n}`),ve(n)})}function Fe(e,t,r,n){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Ze(t)&&!Ae(t)&&!H&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(i=>{var c=WebAssembly.instantiateStreaming(i,r);return c.then(n,function(f){return J(`wasm streaming compile failed: ${f}`),J("falling back to ArrayBuffer instantiation"),le(t,r,n)})}):le(t,r,n)}function be(){return{a:Zn}}function _r(){var e=be();function t(n,i){return Q=n.exports,Q=eo(Q),Te=Q.J,Ie(),Oe=Q.M,pt(Q.K),je(),Q}ht();function r(n){t(n.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(n){J(`Module.instantiateWasm callback failed with error: ${n}`),P(n)}return Me||(Me=yt()),Fe(ue,Me,e,r).catch(P),{}}var mt=e=>{for(;e.length>0;)e.shift()(o)};function Y(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return R[e>>>0];case"i8":return R[e>>>0];case"i16":return re[e>>>1>>>0];case"i32":return ne[e>>>2>>>0];case"i64":ve("to do getValue(i64) use WASM_BIGINT");case"float":return me[e>>>2>>>0];case"double":return ge[e>>>3>>>0];case"*":return M[e>>>2>>>0];default:ve(`invalid type for getValue: ${t}`)}}o.noExitRuntime;function xe(e,t,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":R[e>>>0]=t;break;case"i8":R[e>>>0]=t;break;case"i16":re[e>>>1>>>0]=t;break;case"i32":ne[e>>>2>>>0]=t;break;case"i64":ve("to do setValue(i64) use WASM_BIGINT");case"float":me[e>>>2>>>0]=t;break;case"double":ge[e>>>3>>>0]=t;break;case"*":M[e>>>2>>>0]=t;break;default:ve(`invalid type for setValue: ${r}`)}}class br{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){M[this.ptr+4>>>2>>>0]=t}get_type(){return M[this.ptr+4>>>2>>>0]}set_destructor(t){M[this.ptr+8>>>2>>>0]=t}get_destructor(){return M[this.ptr+8>>>2>>>0]}set_caught(t){t=t?1:0,R[this.ptr+12>>>0]=t}get_caught(){return R[this.ptr+12>>>0]!=0}set_rethrown(t){t=t?1:0,R[this.ptr+13>>>0]=t}get_rethrown(){return R[this.ptr+13>>>0]!=0}init(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)}set_adjusted_ptr(t){M[this.ptr+16>>>2>>>0]=t}get_adjusted_ptr(){return M[this.ptr+16>>>2>>>0]}get_exception_ptr(){var t=nr(this.get_type());if(t)return M[this.excPtr>>>2>>>0];var r=this.get_adjusted_ptr();return r!==0?r:this.excPtr}}var kt=0;function wr(e,t,r){e>>>=0,t>>>=0,r>>>=0;var n=new br(e);throw n.init(t,r),kt=e,kt}var Pr=()=>{ve("")},et={},gt=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function Ue(e){return this.fromWireType(M[e>>>2>>>0])}var We={},we={},tt={},Vt,rt=e=>{throw new Vt(e)},Pe=(e,t,r)=>{e.forEach(function(u){tt[u]=t});function n(u){var d=r(u);d.length!==e.length&&rt("Mismatched type converter count");for(var v=0;v<e.length;++v)se(e[v],d[v])}var i=new Array(t.length),c=[],f=0;t.forEach((u,d)=>{we.hasOwnProperty(u)?i[d]=we[u]:(c.push(u),We.hasOwnProperty(u)||(We[u]=[]),We[u].push(()=>{i[d]=we[u],++f,f===c.length&&n(i)}))}),c.length===0&&n(i)},$r=function(e){e>>>=0;var t=et[e];delete et[e];var r=t.rawConstructor,n=t.rawDestructor,i=t.fields,c=i.map(f=>f.getterReturnType).concat(i.map(f=>f.setterArgumentType));Pe([e],c,f=>{var u={};return i.forEach((d,v)=>{var h=d.fieldName,_=f[v],T=d.getter,D=d.getterContext,O=f[v+i.length],Z=d.setter,ee=d.setterContext;u[h]={read:s=>_.fromWireType(T(D,s)),write:(s,a)=>{var l=[];Z(ee,s,O.toWireType(l,a)),gt(l)}}}),[{name:t.name,fromWireType:d=>{var v={};for(var h in u)v[h]=u[h].read(d);return n(d),v},toWireType:(d,v)=>{for(var h in u)if(!(h in v))throw new TypeError(`Missing field: "${h}"`);var _=r();for(h in u)u[h].write(_,v[h]);return d!==null&&d.push(n,_),_},argPackAdvance:ie,readValueFromPointer:Ue,destructorFunction:n}]})};function Cr(e,t,r,n,i){}var Tr=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);It=e},It,N=e=>{for(var t="",r=e;B[r>>>0];)t+=It[B[r++>>>0]];return t},Ee,C=e=>{throw new Ee(e)};function Sr(e,t,r={}){var n=t.name;if(e||C(`type "${n}" must have a positive integer typeid pointer`),we.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;C(`Cannot register type '${n}' twice`)}if(we[e]=t,delete tt[e],We.hasOwnProperty(e)){var i=We[e];delete We[e],i.forEach(c=>c())}}function se(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Sr(e,t,r)}var ie=8;function Ar(e,t,r,n){e>>>=0,t>>>=0,t=N(t),se(e,{name:t,fromWireType:function(i){return!!i},toWireType:function(i,c){return c?r:n},argPackAdvance:ie,readValueFromPointer:function(i){return this.fromWireType(B[i>>>0])},destructorFunction:null})}var Mr=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),_t=e=>{function t(r){return r.$$.ptrType.registeredClass.name}C(t(e)+" instance already deleted")},bt=!1,Dt=e=>{},Fr=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},jt=e=>{e.count.value-=1;var t=e.count.value===0;t&&Fr(e)},Ht=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var n=Ht(e,t,r.baseClass);return n===null?null:r.downcast(n)},Ut={},xr=()=>Object.keys(ze).length,Wr=()=>{var e=[];for(var t in ze)ze.hasOwnProperty(t)&&e.push(ze[t]);return e},Be=[],wt=()=>{for(;Be.length;){var e=Be.pop();e.$$.deleteScheduled=!1,e.delete()}},Le,Er=e=>{Le=e,Be.length&&Le&&Le(wt)},Rr=()=>{o.getInheritedInstanceCount=xr,o.getLiveInheritedInstances=Wr,o.flushPendingDeletes=wt,o.setDelayFunction=Er},ze={},Or=(e,t)=>{for(t===void 0&&C("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},kr=(e,t)=>(t=Or(e,t),ze[t]),nt=(e,t)=>{(!t.ptrType||!t.ptr)&&rt("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,n=!!t.smartPtr;return r!==n&&rt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ne(Object.create(e,{$$:{value:t,writable:!0}}))};function Vr(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=kr(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function i(){return this.isSmartPointer?nt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):nt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var c=this.registeredClass.getActualType(t),f=Ut[c];if(!f)return i.call(this);var u;this.isConst?u=f.constPointerType:u=f.pointerType;var d=Ht(t,this.registeredClass,u.registeredClass);return d===null?i.call(this):this.isSmartPointer?nt(u.registeredClass.instancePrototype,{ptrType:u,ptr:d,smartPtrType:this,smartPtr:e}):nt(u.registeredClass.instancePrototype,{ptrType:u,ptr:d})}var Ne=e=>typeof FinalizationRegistry>"u"?(Ne=t=>t,e):(bt=new FinalizationRegistry(t=>{jt(t.$$)}),Ne=t=>{var r=t.$$,n=!!r.smartPtr;if(n){var i={$$:r};bt.register(t,i,t)}return t},Dt=t=>bt.unregister(t),Ne(e)),Ir=()=>{Object.assign(ot.prototype,{isAliasOf(e){if(!(this instanceof ot)||!(e instanceof ot))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var n=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)i=n.upcast(i),n=n.baseClass;return t===n&&r===i},clone(){if(this.$$.ptr||_t(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Ne(Object.create(Object.getPrototypeOf(this),{$$:{value:Mr(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||_t(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&C("Object already scheduled for deletion"),Dt(this),jt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||_t(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&C("Object already scheduled for deletion"),Be.push(this),Be.length===1&&Le&&Le(wt),this.$$.deleteScheduled=!0,this}})};function ot(){}var Re=(e,t)=>Object.defineProperty(t,"name",{value:e}),Bt=(e,t,r)=>{if(e[t].overloadTable===void 0){var n=e[t];e[t]=function(...i){return e[t].overloadTable.hasOwnProperty(i.length)||C(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[i.length].apply(this,i)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}},Pt=(e,t,r)=>{o.hasOwnProperty(e)?((r===void 0||o[e].overloadTable!==void 0&&o[e].overloadTable[r]!==void 0)&&C(`Cannot register public name '${e}' twice`),Bt(o,e,e),o.hasOwnProperty(r)&&C(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),o[e].overloadTable[r]=t):(o[e]=t,r!==void 0&&(o[e].numArguments=r))},Dr=48,jr=57,Hr=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Dr&&t<=jr?`_${e}`:e};function Ur(e,t,r,n,i,c,f,u){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=i,this.getActualType=c,this.upcast=f,this.downcast=u,this.pureVirtualFunctions=[]}var $t=(e,t,r)=>{for(;t!==r;)t.upcast||C(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Br(e,t){if(t===null)return this.isReference&&C(`null is not a valid ${this.name}`),0;t.$$||C(`Cannot pass "${Mt(t)}" as a ${this.name}`),t.$$.ptr||C(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=$t(t.$$.ptr,r,this.registeredClass);return n}function Lr(e,t){var r;if(t===null)return this.isReference&&C(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&C(`Cannot pass "${Mt(t)}" as a ${this.name}`),t.$$.ptr||C(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&C(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;if(r=$t(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&C("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:C(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var i=t.clone();r=this.rawShare(r,L.toHandle(()=>i.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:C("Unsupporting sharing policy")}return r}function zr(e,t){if(t===null)return this.isReference&&C(`null is not a valid ${this.name}`),0;t.$$||C(`Cannot pass "${Mt(t)}" as a ${this.name}`),t.$$.ptr||C(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&C(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=$t(t.$$.ptr,r,this.registeredClass);return n}var Nr=()=>{Object.assign(st.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)==null||t.call(this,e)},argPackAdvance:ie,readValueFromPointer:Ue,fromWireType:Vr})};function st(e,t,r,n,i,c,f,u,d,v,h){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=i,this.pointeeType=c,this.sharingPolicy=f,this.rawGetPointee=u,this.rawConstructor=d,this.rawShare=v,this.rawDestructor=h,!i&&t.baseClass===void 0?n?(this.toWireType=Br,this.destructorFunction=null):(this.toWireType=zr,this.destructorFunction=null):this.toWireType=Lr}var Lt=(e,t,r)=>{o.hasOwnProperty(e)||rt("Replacing nonexistent public symbol"),o[e].overloadTable!==void 0&&r!==void 0?o[e].overloadTable[r]=t:(o[e]=t,o[e].argCount=r)},qr=(e,t,r)=>{e=e.replace(/p/g,"i");var n=o["dynCall_"+e];return n(t,...r)},Oe,it=e=>Oe.get(e),Gr=(e,t,r=[])=>{if(e.includes("j"))return qr(e,t,r);var n=it(t)(...r);return e[0]=="p"?n>>>0:n},zt=(e,t)=>(...r)=>Gr(e,t,r),K=(e,t)=>{e=N(e);function r(){return e.includes("j")||e.includes("p")?zt(e,t):it(t)}var n=r();return typeof n!="function"&&C(`unknown function pointer with signature ${e}: ${t}`),n},Xr=(e,t)=>{var r=Re(t,function(n){this.name=t,this.message=n;var i=new Error(n).stack;i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},Nt,qt=e=>{var t=rr(e),r=N(t);return de(t),r},at=(e,t)=>{var r=[],n={};function i(c){if(!n[c]&&!we[c]){if(tt[c]){tt[c].forEach(i);return}r.push(c),n[c]=!0}}throw t.forEach(i),new Nt(`${e}: `+r.map(qt).join([", "]))};function Jr(e,t,r,n,i,c,f,u,d,v,h,_,T){e>>>=0,t>>>=0,r>>>=0,n>>>=0,i>>>=0,c>>>=0,f>>>=0,u>>>=0,d>>>=0,v>>>=0,h>>>=0,_>>>=0,T>>>=0,h=N(h),c=K(i,c),u&&(u=K(f,u)),v&&(v=K(d,v)),T=K(_,T);var D=Hr(h);Pt(D,function(){at(`Cannot construct ${h} due to unbound types`,[n])}),Pe([e,t,r],n?[n]:[],O=>{var j;O=O[0];var Z,ee;n?(Z=O.registeredClass,ee=Z.instancePrototype):ee=ot.prototype;var s=Re(h,function(...X){if(Object.getPrototypeOf(this)!==a)throw new Ee("Use 'new' to construct "+h);if(l.constructor_body===void 0)throw new Ee(h+" has no accessible constructor");var k=l.constructor_body[X.length];if(k===void 0)throw new Ee(`Tried to invoke ctor of ${h} with invalid number of parameters (${X.length}) - expected (${Object.keys(l.constructor_body).toString()}) parameters instead!`);return k.apply(this,X)}),a=Object.create(ee,{constructor:{value:s}});s.prototype=a;var l=new Ur(h,s,a,T,Z,c,u,v);l.baseClass&&((j=l.baseClass).__derivedClasses??(j.__derivedClasses=[]),l.baseClass.__derivedClasses.push(l));var p=new st(h,l,!0,!1,!1),y=new st(h+"*",l,!1,!1,!1),E=new st(h+" const*",l,!1,!0,!1);return Ut[e]={pointerType:y,constPointerType:E},Lt(D,s),[p,y,E]})}var Ct=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(M[t+n*4>>>2>>>0]);return r};function Gt(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function Xt(e,t){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var r=Re(e.name||"unknownFunctionName",function(){});r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return i instanceof Object?i:n}function Yr(e,t,r,n){for(var i=Gt(e),c=e.length,f="",u="",d=0;d<c-2;++d)f+=(d!==0?", ":"")+"arg"+d,u+=(d!==0?", ":"")+"arg"+d+"Wired";var v=`
        return function (${f}) {
        if (arguments.length !== ${c-2}) {
          throwBindingError('function ' + humanName + ' called with ' + arguments.length + ' arguments, expected ${c-2}');
        }`;i&&(v+=`var destructors = [];
`);var h=i?"destructors":"null",_=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];t&&(v+="var thisWired = classParam['toWireType']("+h+`, this);
`);for(var d=0;d<c-2;++d)v+="var arg"+d+"Wired = argType"+d+"['toWireType']("+h+", arg"+d+`);
`,_.push("argType"+d);if(t&&(u="thisWired"+(u.length>0?", ":"")+u),v+=(r||n?"var rv = ":"")+"invoker(fn"+(u.length>0?", ":"")+u+`);
`,i)v+=`runDestructors(destructors);
`;else for(var d=t?1:2;d<e.length;++d){var T=d===1?"thisWired":"arg"+(d-2)+"Wired";e[d].destructorFunction!==null&&(v+=`${T}_dtor(${T});
`,_.push(`${T}_dtor`))}return r&&(v+=`var ret = retType['fromWireType'](rv);
return ret;
`),v+=`}
`,[_,v]}function Tt(e,t,r,n,i,c){var f=t.length;f<2&&C("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var u=t[1]!==null&&r!==null,d=Gt(t),v=t[0].name!=="void",h=[e,C,n,i,gt,t[0],t[1]],_=0;_<f-2;++_)h.push(t[_+2]);if(!d)for(var _=u?1:2;_<t.length;++_)t[_].destructorFunction!==null&&h.push(t[_].destructorFunction);let[T,D]=Yr(t,u,v,c);T.push(D);var O=Xt(Function,T)(...h);return Re(e,O)}var Kr=function(e,t,r,n,i,c){e>>>=0,r>>>=0,n>>>=0,i>>>=0,c>>>=0;var f=Ct(t,r);i=K(n,i),Pe([],[e],u=>{u=u[0];var d=`constructor ${u.name}`;if(u.registeredClass.constructor_body===void 0&&(u.registeredClass.constructor_body=[]),u.registeredClass.constructor_body[t-1]!==void 0)throw new Ee(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${u.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return u.registeredClass.constructor_body[t-1]=()=>{at(`Cannot construct ${u.name} due to unbound types`,f)},Pe([],f,v=>(v.splice(1,0,null),u.registeredClass.constructor_body[t-1]=Tt(d,v,null,i,c),[])),[]})},Jt=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},Qr=function(e,t,r,n,i,c,f,u,d){e>>>=0,t>>>=0,n>>>=0,i>>>=0,c>>>=0,f>>>=0;var v=Ct(r,n);t=N(t),t=Jt(t),c=K(i,c),Pe([],[e],h=>{h=h[0];var _=`${h.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),u&&h.registeredClass.pureVirtualFunctions.push(t);function T(){at(`Cannot call ${_} due to unbound types`,v)}var D=h.registeredClass.instancePrototype,O=D[t];return O===void 0||O.overloadTable===void 0&&O.className!==h.name&&O.argCount===r-2?(T.argCount=r-2,T.className=h.name,D[t]=T):(Bt(D,t,_),D[t].overloadTable[r-2]=T),Pe([],v,Z=>{var ee=Tt(_,Z,h,c,f,d);return D[t].overloadTable===void 0?(ee.argCount=r-2,D[t]=ee):D[t].overloadTable[r-2]=ee,[]}),[]})},St=[],fe=[];function At(e){e>>>=0,e>9&&--fe[e+1]===0&&(fe[e]=void 0,St.push(e))}var Zr=()=>fe.length/2-5-St.length,en=()=>{fe.push(0,1,void 0,1,null,1,!0,1,!1,1),o.count_emval_handles=Zr},L={toValue:e=>(e||C("Cannot use deleted val. handle = "+e),fe[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=St.pop()||fe.length;return fe[t]=e,fe[t+1]=1,t}}}},tn={name:"emscripten::val",fromWireType:e=>{var t=L.toValue(e);return At(e),t},toWireType:(e,t)=>L.toHandle(t),argPackAdvance:ie,readValueFromPointer:Ue,destructorFunction:null};function Yt(e){return e>>>=0,se(e,tn)}var rn=(e,t,r)=>{switch(t){case 1:return r?function(n){return this.fromWireType(R[n>>>0])}:function(n){return this.fromWireType(B[n>>>0])};case 2:return r?function(n){return this.fromWireType(re[n>>>1>>>0])}:function(n){return this.fromWireType($[n>>>1>>>0])};case 4:return r?function(n){return this.fromWireType(ne[n>>>2>>>0])}:function(n){return this.fromWireType(M[n>>>2>>>0])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function nn(e,t,r,n){e>>>=0,t>>>=0,r>>>=0,t=N(t);function i(){}i.values={},se(e,{name:t,constructor:i,fromWireType:function(c){return this.constructor.values[c]},toWireType:(c,f)=>f.value,argPackAdvance:ie,readValueFromPointer:rn(t,r,n),destructorFunction:null}),Pt(t,i)}var ct=(e,t)=>{var r=we[e];return r===void 0&&C(`${t} has unknown type ${qt(e)}`),r};function on(e,t,r){e>>>=0,t>>>=0;var n=ct(e,"enum");t=N(t);var i=n.constructor,c=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:Re(`${n.name}_${t}`,function(){})}});i.values[r]=c,i[t]=c}var Mt=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},sn=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(me[r>>>2>>>0])};case 8:return function(r){return this.fromWireType(ge[r>>>3>>>0])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},an=function(e,t,r){e>>>=0,t>>>=0,r>>>=0,t=N(t),se(e,{name:t,fromWireType:n=>n,toWireType:(n,i)=>i,argPackAdvance:ie,readValueFromPointer:sn(t,r),destructorFunction:null})};function cn(e,t,r,n,i,c,f){e>>>=0,r>>>=0,n>>>=0,i>>>=0,c>>>=0;var u=Ct(t,r);e=N(e),e=Jt(e),i=K(n,i),Pt(e,function(){at(`Cannot call ${e} due to unbound types`,u)},t-1),Pe([],u,d=>{var v=[d[0],null].concat(d.slice(1));return Lt(e,Tt(e,v,null,i,c,f),t-1),[]})}var un=(e,t,r)=>{switch(t){case 1:return r?n=>R[n>>>0]:n=>B[n>>>0];case 2:return r?n=>re[n>>>1>>>0]:n=>$[n>>>1>>>0];case 4:return r?n=>ne[n>>>2>>>0]:n=>M[n>>>2>>>0];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function ln(e,t,r,n,i){e>>>=0,t>>>=0,r>>>=0,t=N(t);var c=h=>h;if(n===0){var f=32-8*r;c=h=>h<<f>>>f}var u=t.includes("unsigned"),d=(h,_)=>{},v;u?v=function(h,_){return d(_,this.name),_>>>0}:v=function(h,_){return d(_,this.name),_},se(e,{name:t,fromWireType:c,toWireType:v,argPackAdvance:ie,readValueFromPointer:un(t,r,n!==0),destructorFunction:null})}function fn(e,t,r){e>>>=0,r>>>=0;var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],i=n[t];function c(f){var u=M[f>>>2>>>0],d=M[f+4>>>2>>>0];return new i(R.buffer,d,u)}r=N(r),se(e,{name:r,fromWireType:c,argPackAdvance:ie,readValueFromPointer:c},{ignoreDuplicateRegistrations:!0})}function dn(e,t){e>>>=0,Yt(e)}var vn=(e,t,r,n)=>{if(r>>>=0,!(n>0))return 0;for(var i=r,c=r+n-1,f=0;f<e.length;++f){var u=e.charCodeAt(f);if(u>=55296&&u<=57343){var d=e.charCodeAt(++f);u=65536+((u&1023)<<10)|d&1023}if(u<=127){if(r>=c)break;t[r++>>>0]=u}else if(u<=2047){if(r+1>=c)break;t[r++>>>0]=192|u>>6,t[r++>>>0]=128|u&63}else if(u<=65535){if(r+2>=c)break;t[r++>>>0]=224|u>>12,t[r++>>>0]=128|u>>6&63,t[r++>>>0]=128|u&63}else{if(r+3>=c)break;t[r++>>>0]=240|u>>18,t[r++>>>0]=128|u>>12&63,t[r++>>>0]=128|u>>6&63,t[r++>>>0]=128|u&63}}return t[r>>>0]=0,r-i},pn=(e,t,r)=>vn(e,B,t,r),hn=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},Kt=typeof TextDecoder<"u"?new TextDecoder:void 0,yn=(e,t,r)=>{t>>>=0;for(var n=t+r,i=t;e[i]&&!(i>=n);)++i;if(i-t>16&&e.buffer&&Kt)return Kt.decode(e.subarray(t,i));for(var c="";t<i;){var f=e[t++];if(!(f&128)){c+=String.fromCharCode(f);continue}var u=e[t++]&63;if((f&224)==192){c+=String.fromCharCode((f&31)<<6|u);continue}var d=e[t++]&63;if((f&240)==224?f=(f&15)<<12|u<<6|d:f=(f&7)<<18|u<<12|d<<6|e[t++]&63,f<65536)c+=String.fromCharCode(f);else{var v=f-65536;c+=String.fromCharCode(55296|v>>10,56320|v&1023)}}return c},mn=(e,t)=>(e>>>=0,e?yn(B,e,t):"");function gn(e,t){e>>>=0,t>>>=0,t=N(t);var r=t==="std::string";se(e,{name:t,fromWireType(n){var i=M[n>>>2>>>0],c=n+4,f;if(r)for(var u=c,d=0;d<=i;++d){var v=c+d;if(d==i||B[v>>>0]==0){var h=v-u,_=mn(u,h);f===void 0?f=_:(f+="\0",f+=_),u=v+1}}else{for(var T=new Array(i),d=0;d<i;++d)T[d]=String.fromCharCode(B[c+d>>>0]);f=T.join("")}return de(n),f},toWireType(n,i){i instanceof ArrayBuffer&&(i=new Uint8Array(i));var c,f=typeof i=="string";f||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array||C("Cannot pass non-string to std::string"),r&&f?c=hn(i):c=i.length;var u=Et(4+c+1),d=u+4;if(M[u>>>2>>>0]=c,r&&f)pn(i,d,c+1);else if(f)for(var v=0;v<c;++v){var h=i.charCodeAt(v);h>255&&(de(d),C("String has UTF-16 code units that do not fit in 8 bits")),B[d+v>>>0]=h}else for(var v=0;v<c;++v)B[d+v>>>0]=i[v];return n!==null&&n.push(de,u),u},argPackAdvance:ie,readValueFromPointer:Ue,destructorFunction(n){de(n)}})}var Qt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,_n=(e,t)=>{for(var r=e,n=r>>1,i=n+t/2;!(n>=i)&&$[n>>>0];)++n;if(r=n<<1,r-e>32&&Qt)return Qt.decode(B.subarray(e>>>0,r>>>0));for(var c="",f=0;!(f>=t/2);++f){var u=re[e+f*2>>>1>>>0];if(u==0)break;c+=String.fromCharCode(u)}return c},bn=(e,t,r)=>{if(r??(r=2147483647),r<2)return 0;r-=2;for(var n=t,i=r<e.length*2?r/2:e.length,c=0;c<i;++c){var f=e.charCodeAt(c);re[t>>>1>>>0]=f,t+=2}return re[t>>>1>>>0]=0,t-n},wn=e=>e.length*2,Pn=(e,t)=>{for(var r=0,n="";!(r>=t/4);){var i=ne[e+r*4>>>2>>>0];if(i==0)break;if(++r,i>=65536){var c=i-65536;n+=String.fromCharCode(55296|c>>10,56320|c&1023)}else n+=String.fromCharCode(i)}return n},$n=(e,t,r)=>{if(t>>>=0,r??(r=2147483647),r<4)return 0;for(var n=t,i=n+r-4,c=0;c<e.length;++c){var f=e.charCodeAt(c);if(f>=55296&&f<=57343){var u=e.charCodeAt(++c);f=65536+((f&1023)<<10)|u&1023}if(ne[t>>>2>>>0]=f,t+=4,t+4>i)break}return ne[t>>>2>>>0]=0,t-n},Cn=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t},Tn=function(e,t,r){e>>>=0,t>>>=0,r>>>=0,r=N(r);var n,i,c,f;t===2?(n=_n,i=bn,f=wn,c=u=>$[u>>>1>>>0]):t===4&&(n=Pn,i=$n,f=Cn,c=u=>M[u>>>2>>>0]),se(e,{name:r,fromWireType:u=>{for(var d=M[u>>>2>>>0],v,h=u+4,_=0;_<=d;++_){var T=u+4+_*t;if(_==d||c(T)==0){var D=T-h,O=n(h,D);v===void 0?v=O:(v+="\0",v+=O),h=T+t}}return de(u),v},toWireType:(u,d)=>{typeof d!="string"&&C(`Cannot pass non-string to C++ string type ${r}`);var v=f(d),h=Et(4+v+t);return M[h>>>2>>>0]=v/t,i(d,h+4,v+t),u!==null&&u.push(de,h),h},argPackAdvance:ie,readValueFromPointer:Ue,destructorFunction(u){de(u)}})};function Sn(e,t,r,n,i,c){e>>>=0,t>>>=0,r>>>=0,n>>>=0,i>>>=0,c>>>=0,et[e]={name:N(t),rawConstructor:K(r,n),rawDestructor:K(i,c),fields:[]}}function An(e,t,r,n,i,c,f,u,d,v){e>>>=0,t>>>=0,r>>>=0,n>>>=0,i>>>=0,c>>>=0,f>>>=0,u>>>=0,d>>>=0,v>>>=0,et[e].fields.push({fieldName:N(t),getterReturnType:r,getter:K(n,i),getterContext:c,setterArgumentType:f,setter:K(u,d),setterContext:v})}var Mn=function(e,t){e>>>=0,t>>>=0,t=N(t),se(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,n)=>{}})};function Fn(e,t,r){return e>>>=0,t>>>=0,r>>>=0,B.copyWithin(e>>>0,t>>>0,t+r>>>0)}var Zt=(e,t,r)=>{var n=[],i=e.toWireType(n,r);return n.length&&(M[t>>>2>>>0]=L.toHandle(n)),i};function xn(e,t,r){return e>>>=0,t>>>=0,r>>>=0,e=L.toValue(e),t=ct(t,"emval::as"),Zt(t,r,e)}var Wn={},er=e=>{var t=Wn[e];return t===void 0?N(e):t},Ft=[];function En(e,t,r,n,i){return e>>>=0,t>>>=0,r>>>=0,n>>>=0,i>>>=0,e=Ft[e],t=L.toValue(t),r=er(r),e(t,t[r],n,i)}function Rn(e,t){return e>>>=0,t>>>=0,e=L.toValue(e),t=L.toValue(t),e==t}var On=e=>{var t=Ft.length;return Ft.push(e),t},kn=(e,t)=>{for(var r=new Array(e),n=0;n<e;++n)r[n]=ct(M[t+n*4>>>2>>>0],"parameter "+n);return r};function Vn(e,t,r){t>>>=0;var n=kn(e,t),i=n.shift();e--;var c=`return function (obj, func, destructorsRef, args) {
`,f=0,u=[];r===0&&u.push("obj");for(var d=["retType"],v=[i],h=0;h<e;++h)u.push("arg"+h),d.push("argType"+h),v.push(n[h]),c+=`  var arg${h} = argType${h}.readValueFromPointer(args${f?"+"+f:""});
`,f+=n[h].argPackAdvance;var _=r===1?"new func":"func.call";c+=`  var rv = ${_}(${u.join(", ")});
`,i.isVoid||(d.push("emval_returnValue"),v.push(Zt),c+=`  return emval_returnValue(retType, destructorsRef, rv);
`),c+=`};
`,d.push(c);var T=Xt(Function,d)(...v),D=`methodCaller<(${n.map(O=>O.name).join(", ")}) => ${i.name}>`;return On(Re(D,T))}function In(e,t){return e>>>=0,t>>>=0,e=L.toValue(e),t=L.toValue(t),L.toHandle(e[t])}function Dn(e){e>>>=0,e>9&&(fe[e+1]+=1)}function jn(e){return e>>>=0,L.toHandle(er(e))}function Hn(){return L.toHandle({})}function Un(e){e>>>=0;var t=L.toValue(e);gt(t),At(e)}function Bn(e,t,r){e>>>=0,t>>>=0,r>>>=0,e=L.toValue(e),t=L.toValue(t),r=L.toValue(r),e[t]=r}function Ln(e,t){e>>>=0,t>>>=0,e=ct(e,"_emval_take_value");var r=e.readValueFromPointer(t);return L.toHandle(r)}var zn=()=>4294901760,Nn=e=>{var t=Te.buffer,r=(e-t.byteLength+65535)/65536;try{return Te.grow(r),Ie(),1}catch{}};function qn(e){e>>>=0;var t=B.length,r=zn();if(e>r)return!1;for(var n=(d,v)=>d+(v-d%v)%v,i=1;i<=4;i*=2){var c=t*(1+.2/i);c=Math.min(c,e+100663296);var f=Math.min(r,n(Math.max(e,c),65536)),u=Nn(f);if(u)return!0}return!1}var tr=(e,t)=>{e<128?t.push(e):t.push(e%128|128,e>>7)},Gn=e=>{for(var t={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},r={parameters:[],results:e[0]=="v"?[]:[t[e[0]]]},n=1;n<e.length;++n)r.parameters.push(t[e[n]]);return r},Xn=(e,t)=>{var r=e.slice(0,1),n=e.slice(1),i={i:127,p:127,j:126,f:125,d:124,e:111};t.push(96),tr(n.length,t);for(var c=0;c<n.length;++c)t.push(i[n[c]]);r=="v"?t.push(0):t.push(1,i[r])},Jn=(e,t)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(Gn(t),e);var r=[1];Xn(t,r);var n=[0,97,115,109,1,0,0,0,1];tr(r.length,n),n.push(...r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n)),c=new WebAssembly.Instance(i,{e:{f:e}}),f=c.exports.f;return f},Yn=(e,t)=>{if($e)for(var r=e;r<e+t;r++){var n=it(r);n&&$e.set(n,r)}},$e,Kn=e=>($e||($e=new WeakMap,Yn(0,Oe.length)),$e.get(e)||0),xt=[],Qn=()=>{if(xt.length)return xt.pop();try{Oe.grow(1)}catch(e){throw e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":e}return Oe.length-1},Wt=(e,t)=>Oe.set(e,t),qe=(e,t)=>{var r=Kn(e);if(r)return r;var n=Qn();try{Wt(n,e)}catch(c){if(!(c instanceof TypeError))throw c;var i=Jn(e,t);Wt(n,i)}return $e.set(e,n),n},Ge=e=>{$e.delete(it(e)),Wt(e,null),xt.push(e)};Vt=o.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Tr(),Ee=o.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Ir(),Rr(),Nr(),Nt=o.UnboundTypeError=Xr(Error,"UnboundTypeError"),en();var Zn={i:wr,D:Pr,n:$r,C:Cr,H:Ar,h:Jr,g:Kr,a:Qr,G:Yt,t:nn,f:on,x:an,c:cn,j:ln,e:fn,k:dn,w:gn,s:Tn,o:Sn,l:An,I:Mn,F:Fn,v:xn,z:En,b:At,m:Rn,y:Vn,B:In,u:Dn,q:jn,A:Hn,p:Un,r:Bn,d:Ln,E:qn},Q=_r(),rr=e=>(rr=Q.L)(e),de=e=>(de=Q.N)(e),Et=e=>(Et=Q.O)(e),nr=e=>(nr=Q.P)(e);function eo(e){e=Object.assign({},e);var t=n=>i=>n(i)>>>0,r=n=>()=>n()>>>0;return e.L=t(e.L),e.O=t(e.O),e._emscripten_stack_alloc=t(e._emscripten_stack_alloc),e.emscripten_stack_get_current=r(e.emscripten_stack_get_current),e}o.addFunction=qe,o.removeFunction=Ge;var ut;_e=function e(){ut||or(),ut||(_e=e)};function or(){if(oe>0||(dt(),oe>0))return;function e(){var t;ut||(ut=!0,o.calledRun=!0,!ye&&(vt(),S(o),(t=o.onRuntimeInitialized)==null||t.call(o),Ye()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return or(),b=x,b}})();const ir=["cube","cylinder","sphere","tetrahedron","extrude","revolve","compose","union","difference","intersection","levelSet","smooth","ofMesh","hull"],ar=["add","subtract","intersect","decompose","warp","transform","translate","rotate","scale","mirror","calculateCurvature","calculateNormals","smoothByNormals","smoothOut","refine","refineToLength","refineToTolerance","setProperties","setTolerance","asOriginal","trimByPlane","split","splitByPlane","slice","project","hull"],cr=["square","circle","union","difference","intersection","compose","ofPolygons","hull"],ur=["add","subtract","intersect","rectClip","decompose","transform","translate","rotate","scale","mirror","simplify","offset","hull"],lr=["show","only","setMaterial"];function Xe(w,m,b,o,S){const P=S[w],x=b?P:P.prototype;for(const A of m){const F=x[A];x[A]=function(...H){const I=F(...H);return o.push(I),I}}}function fr(w){const m=[];Xe("Manifold",ar,!1,m,w),Xe("Manifold",ir,!0,m,w),Xe("CrossSection",ur,!1,m,w),Xe("CrossSection",cr,!0,m,w);for(const b of lr){const o=w[b];w[b]=function(...S){const P=o(...S);return m.push(P),P}}return w.cleanup=function(){for(const b of m)if(b instanceof Array)for(const o of b)o.delete();else b.delete();m.length=0},w.clone=function(b){return b.asOriginal()},w}function Ce(w){return w*180/Math.PI}function dr(w,m,b,o,S=!0){const P=w.Manifold;let x=[];for(let A=0;A<(S?o.length:o.length-1);A++){const F=o[A],H=o[(A+1)%o.length],I=H.x-F.x,W=H.y-F.y,z=Ce(Math.atan2(W,I)),U=Math.sqrt(I*I+W*W),pe=P.extrude(m,U).rotate(90,0,90).rotate(0,0,z).translate(F.x,F.y,0);x.push(pe);const q=P.revolve(b,36).rotate(0).translate(H.x,H.y,0);x.push(q)}return x}function vr(w,m,b,o,S=!0){const P=w.Manifold,x=[];for(let A=0;A<(S?o.length-1:o.length);A++){const F=o[A],H=o[(A+1)%o.length],I=H.x-F.x,W=H.y-F.y,z=Ce(Math.atan2(W,I)),U=Math.sqrt(I*I+W*W),pe=P.extrude(m,U).rotate(90,0,90).rotate(0,0,z).translate(F.x,F.y,0);x.push(pe);const q=o[(A-(S?2:1)+o.length)%o.length],G=F.x-q.x,te=F.y-q.y,he=Ce(Math.atan2(te,G));let J=-z+he;for(;J>180;)J-=360;for(;J<-180;)J+=360;if(J>0){const ue=P.revolve(b).rotate(0).translate(F.x,F.y,0);x.push(ue)}}return x}function lt({helper:w,size:m,roundRadius:b,center:o=[0,0]}){const S=w.CrossSection,P=[S.circle(b,16).translate(-m[0]/2+b+o[0],-m[1]/2+b+o[1]),S.circle(b,16).translate(m[0]/2-b+o[0],-m[1]/2+b+o[1]),S.circle(b,16).translate(m[0]/2-b+o[0],m[1]/2-b+o[1]),S.circle(b,16).translate(-m[0]/2+b+o[0],m[1]/2-b+o[1])],x=S.hull(P);for(const A of P)A.delete();return x}function pr({helper:w,height:m,radius:b,roundRadius:o}){const S=w.CrossSection,P=[],x=10,A=(b*b+o*o)/(2*o),F=0;let H=m/2-A;for(let W=0;W<=x;W++){const z=Math.asin(b/A)*(W/x);P.push([F+A*Math.sin(z),H+A*Math.cos(z)])}H=-m/2+A;for(let W=x;W>=0;W--){const z=Math.asin(b/A)*(W/x);P.push([F+A*Math.sin(z),H-A*Math.cos(z)])}return new S(P.reverse()).revolve()}function hr(w,m,b){const o=b.usbHeight,P=lt({helper:w,size:[15,8],roundRadius:1.5}).extrude(100),x=lt({helper:w,size:[9.5,o],roundRadius:1}).extrude(1.5);return P.translate(0,0,1.5).add(x).rotate(90,0,0).translate(-m.x,m.y,-o/2-b.switchBoardHeight-b.connectorHeight-b.controllerBoardHeight)}let ft=0,Rt=!1;self.onmessage=async w=>{try{w.data.type==="calculate"?await mr(w.data):w.data.type==="cancel"&&ft++}catch(m){m.message!=="canceled"&&self.postMessage({type:"error",error:m.message})}};let ae;async function yr(){const w=await sr();w.setup(),ae=fr(w),Rt=!0}yr();async function ce(w){if(await new Promise(m=>setTimeout(m,0)),w!==ft)throw new Error("canceled")}async function mr(w){var He;const m=ft;for(;!Rt;)await ce(m);const{bottomInnerLines:b,bottomOuterLines:o,controller:S,params:P,startX:x,endX:A,startY:F,endY:H,centerX:I,centerY:W,bh:z,tilt:U,tent:pe}=w,q=P.connectorHeight,G=P.switchBoardHeight,te=P.controllerBoardHeight,he=P.batteryHeight,J=P.partsHeight,ue=P.usbHeight,Te=P.bottomMinThickness,ye=G+q+te+he+Te,R=ae.Manifold,B=ae.CrossSection,re=o.map(g=>[-g.x,g.y]);let $=R.extrude(re,ye*5).translate(0,0,-ye*5);const ne=$.asOriginal(),M=pe;let me=R.cube([(A-x)*3,(H-F)*3,ye*20],!0).translate(-I,W,-ye*20/2).rotate(U).rotate(0,Ce(M)).translate(0,0,z);$=$.subtract(me),me.delete(),await ce(m);{const g={...$.asOriginal().translate(I,-W).setTolerance(.05).getMesh()};self.postMessage({type:"complete",result:g})}const ge=S.usbCenterline[0].x,Ie=Math.min(...o.map(g=>g.y)),Se=8,De=pr({helper:ae,height:2,radius:Se,roundRadius:.5}),Je=De.asOriginal().translate([-ge-19,Ie+Se-2.2,-2]),dt=De.translate([-ge+19,Ie+Se-2.2,-2]);$=R.union([$,Je,dt]),await ce(m);const vt=b.map(g=>[-g.x,g.y]),Ye=R.extrude(vt,G+q).translate(0,0,-G-q);$=$.subtract(Ye),Ye.delete(),await ce(m);const Ke=(He=S.batteryAreaOutline)==null?void 0:He.map(g=>[-g.x,g.y]);if(Ke!==void 0){const g=G+q+te+he,le=R.extrude(Ke,g).translate(0,0,-g);$=$.subtract(le),le.delete()}await ce(m);const pt=S.partsAreaOutline.map(g=>[-g.x,g.y]),Qe=te+q+G+J,oe=R.extrude(pt,Qe).translate(0,0,-Qe);$=$.subtract(oe),oe.delete(),await ce(m);const _e=S.usbAreaOutline.map(g=>{const le=g.map(be=>[-be.x,be.y]),Fe=te+q+G+ue;return R.extrude(le,Fe).translate(0,0,-Fe)});for(const g of _e)await ce(m),$=$.subtract(g),g.delete();if(S.powerSwitchPos!==void 0){const g=B.square([4.1,9.8],!0).extrude(4),le=B.square([2.5,6.5],!0).extrude(4).translate(0,0,4),Fe=lt({helper:ae,size:[20,15],roundRadius:.5,center:[S.powerSwitchPos.side==="left"?5.5:-5.5,0]}).extrude(50).translate(0,0,6),be=g.add(le).add(Fe).rotate(180,0,0).translate(-S.powerSwitchPos.x,S.powerSwitchPos.y,-(G+q+te));$=$.subtract(be),be.delete()}const ht=[[0,0],[-4,-4],[4,-4]],je=[[0,0],[0,-4],[4,-4]],ve=dr(ae,ht,je,o.map(g=>({x:-g.x,y:g.y}))).map(g=>g.mirror([0,0,1]).translate(0,0,-1));for(const g of ve)await ce(m),$=$.subtract(g),g.delete();const Ze=R.cube([1e3,1e3,.01],!0).translate(-I,W).intersect(ne.translate(0,0,-z).rotate(0,-Ce(M)).rotate(-U)).project().simplify(.2).offset(2).toPolygons(),Ae=vr(ae,je,je,Ze[0].map(g=>({x:g[0],y:g[1]})),!1).map(g=>g.rotate(U).rotate(0,Ce(M)).translate(0,0,z+3));for(const g of Ae)await ce(m),$=$==null?void 0:$.subtract(g),g.delete();const yt=S.usbCenterline.map(g=>hr(ae,g,P));$=R.difference([$,...yt]),$=$.translate(I,-W,0);const Me={...$.setTolerance(.05).getMesh()};self.postMessage({type:"complete",result:Me}),ae.cleanup()}var gr=Object.freeze({__proto__:null})})();
